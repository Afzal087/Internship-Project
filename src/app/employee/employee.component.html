<!-- Main container for the multi-step form -->
<div class="flex w-full justify-center p-6 bg-gray-100">
  <div class="w-full max-w-5xl">
    <!-- 6-Step Progress Bar -->
    <div class="mb-6 px-4">
      <div class="w-full px-4">
        <div class="w-full px-4">
          <div class="flex items-center">
            <!-- Step 1 -->
            <div class="flex flex-col items-center">
              <div class="flex z-10 items-center justify-center shrink-0 rounded-full h-10 w-10" [ngClass]="{
                  'bg-blue-900': currentForm >= 1,
                  'bg-gray-200': currentForm < 1
                }">
                <span class="font-bold" [ngClass]="{
                    'text-white': currentForm >= 1,
                    'text-gray-500': currentForm < 1
                  }"><button [disabled]="currentForm == 1" (click)="currentForm = 1">
                    1
                  </button></span>
              </div>
              <div class="mt-1 text-xs font-semibold" [ngClass]="{
                  'text-blue-900': currentForm >= 1,
                  'text-gray-500': currentForm < 1
                }">
                Personal
              </div>
            </div>

            <!-- Connector -->
            <div class="flex-auto border-t-2" [ngClass]="{
                'border-blue-900': currentForm > 1,
                'border-gray-300': currentForm <= 1
              }"></div>

            <!-- Step 2 -->
            <div class="flex flex-col items-center">
              <div class="flex z-10 items-center justify-center shrink-0 rounded-full h-10 w-10" [ngClass]="{
                  'bg-blue-900': currentForm >= 2,
                  'bg-gray-200': currentForm < 2
                }">
                <span class="font-bold" [ngClass]="{
                    'text-white': currentForm >= 2,
                    'text-gray-500': currentForm < 2
                  }"><button [disabled]="currentForm < 2" (click)="currentForm = 2">
                    2
                  </button></span>
              </div>
              <div class="mt-1 text-xs font-semibold" [ngClass]="{
                  'text-blue-900': currentForm >= 2,
                  'text-gray-500': currentForm < 2
                }">
                Address
              </div>
            </div>

            <!-- Connector -->
            <div class="flex-auto border-t-2" [ngClass]="{
                'border-blue-900': currentForm > 2,
                'border-gray-300': currentForm <= 2
              }"></div>

            <!-- Step 3 -->
            <div class="flex flex-col items-center">
              <div class="flex z-10 items-center justify-center shrink-0 rounded-full h-10 w-10" [ngClass]="{
                  'bg-blue-900': currentForm >= 3,
                  'bg-gray-200': currentForm < 3
                }">
                <span class="font-bold" [ngClass]="{
                    'text-white': currentForm >= 3,
                    'text-gray-500': currentForm < 3
                  }"><button [disabled]="currentForm < 3" (click)="currentForm = 3">
                    3
                  </button></span>
              </div>
              <div class="mt-1 text-xs font-semibold" [ngClass]="{
                  'text-blue-900': currentForm >= 3,
                  'text-gray-500': currentForm < 3
                }">
                Job Info
              </div>
            </div>

            <!-- Connector -->
            <div class="flex-auto border-t-2" [ngClass]="{
                'border-blue-900': currentForm > 3,
                'border-gray-300': currentForm <= 3
              }"></div>

            <!-- Step 4 -->
            <div class="flex flex-col items-center">
              <div class="flex z-10 items-center justify-center shrink-0 rounded-full h-10 w-10" [ngClass]="{
                  'bg-blue-900': currentForm >= 4,
                  'bg-gray-200': currentForm < 4
                }">
                <span class="font-bold" [ngClass]="{
                    'text-white': currentForm >= 4,
                    'text-gray-500': currentForm < 4
                  }"><button [disabled]="currentForm < 4" (click)="currentForm = 4">
                    4
                  </button></span>
              </div>
              <div class="mt-1 text-xs font-semibold" [ngClass]="{
                  'text-blue-900': currentForm >= 4,
                  'text-gray-500': currentForm < 4
                }">
                Payroll
              </div>
            </div>

            <!-- Connector -->
            <div class="flex-auto border-t-2" [ngClass]="{
                'border-blue-900': currentForm > 4,
                'border-gray-300': currentForm <= 4
              }"></div>

            <!-- Step 5 -->
            <div class="flex flex-col items-center">
              <div class="flex z-10 items-center justify-center shrink-0 rounded-full h-10 w-10" [ngClass]="{
                  'bg-blue-900': currentForm >= 5,
                  'bg-gray-200': currentForm < 5
                }">
                <span class="font-bold" [ngClass]="{
                    'text-white': currentForm >= 5,
                    'text-gray-500': currentForm < 5
                  }"><button [disabled]="currentForm < 5" (click)="currentForm = 5">
                    5
                  </button></span>
              </div>
              <div class="mt-1 text-xs font-semibold" [ngClass]="{
                  'text-blue-900': currentForm >= 5,
                  'text-gray-500': currentForm < 5
                }">
                Documents
              </div>
            </div>

            <!-- Connector -->
            <div class="flex-auto border-t-2" [ngClass]="{
                'border-blue-900': currentForm > 5,
                'border-gray-300': currentForm <= 5
              }"></div>

            <!-- Step 6 -->
            <div class="flex flex-col items-center">
              <div class="flex z-10 items-center justify-center shrink-0 rounded-full h-10 w-10" [ngClass]="{
                  'bg-blue-900': currentForm >= 6,
                  'bg-gray-200': currentForm < 6
                }">
                <span class="font-bold" [ngClass]="{
                    'text-white': currentForm >= 6,
                    'text-gray-500': currentForm < 6
                  }"><button [disabled]="currentForm < 6" (click)="currentForm = 6">
                    6
                  </button></span>
              </div>
              <div class="mt-1 text-xs font-semibold" [ngClass]="{
                  'text-blue-900': currentForm >= 6,
                  'text-gray-500': currentForm < 6
                }">
                Complete
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Form Card -->

    <div class="flex flex-col bg-white w-full shadow-2xl rounded-xl border-2 border-gray-200">

      <!-- Card Header -->
      <div *ngIf="currentForm == 1" class="flex items-center p-4 border-b-2 border-gray-100">
        <!-- Container for the icon - layout remains the same -->
        <div class="h-[40px] w-[40px] flex items-center justify-center">
          <mat-icon class="text-blue-900" style="
              font-size: 40px;
              width: 40px;
              height: 40px;
              line-height: 40px;
            ">account_box</mat-icon>
        </div>

        <div class="flex flex-col ml-3">
          <p class="text-blue-900 font-semibold text-md">
            Employee Information
          </p>
          <p class="text-gray-500 text-xs">Step 1: Personal Details</p>
        </div>
      </div>
      <div *ngIf="currentForm == 2" class="flex items-center p-4 border-b-2 border-gray-100">
        <!-- Container for the icon - layout remains the same -->
        <div class="h-[40px] w-[40px] flex items-center justify-center">
          <mat-icon class="text-blue-900" style="
              font-size: 40px;
              width: 40px;
              height: 40px;
              line-height: 40px;
            ">account_box</mat-icon>
        </div>

        <div class="flex flex-col ml-3">
          <p class="text-blue-900 font-semibold text-md">Address Information</p>
          <p class="text-gray-500 text-xs">Step 2: Enter Address Information</p>
        </div>
      </div>
      <div *ngIf="currentForm == 3" class="flex items-center p-4 border-b-2 border-gray-100">
        <!-- Container for the icon - layout remains the same -->
        <div class="h-[40px] w-[40px] flex items-center justify-center">
          <mat-icon class="text-blue-900" style="
              font-size: 40px;
              width: 40px;
              height: 40px;
              line-height: 40px;
            ">account_box</mat-icon>
        </div>

        <div class="flex flex-col ml-3">
          <p class="text-blue-900 font-semibold text-md">Job Information</p>
          <p class="text-gray-500 text-xs">
            Step 3: Enter Job Related Information
          </p>
        </div>
      </div>
      <div *ngIf="currentForm == 4" class="flex items-center p-4 border-b-2 border-gray-100">
        <!-- Container for the icon - layout remains the same -->
        <div class="h-[40px] w-[40px] flex items-center justify-center">
          <mat-icon class="text-blue-900" style="
              font-size: 40px;
              width: 40px;
              height: 40px;
              line-height: 40px;
            ">account_box</mat-icon>
        </div>

        <div class="flex flex-col ml-3">
          <p class="text-blue-900 font-semibold text-md">Payroll Information</p>
          <p class="text-gray-500 text-xs">Step 4: Enter Payroll Information</p>
        </div>
      </div>
      <div *ngIf="currentForm == 5" class="flex items-center p-4 border-b-2 border-gray-100">
        <!-- Container for the icon - layout remains the same -->
        <div class="h-[40px] w-[40px] flex items-center justify-center">
          <mat-icon class="text-blue-900" style="
              font-size: 40px;
              width: 40px;
              height: 40px;
              line-height: 40px;
            ">account_box</mat-icon>
        </div>

        <div class="flex flex-col ml-3">
          <p class="text-blue-900 font-semibold text-md">Upload Documents</p>
          <p class="text-gray-500 text-xs">Step 4: Upload Document</p>
        </div>
      </div>


      <!-- Form Fields Section -->
      <form #personalInfoForm="ngForm" (ngSubmit)="onSubmit(personalInfoForm)" class="p-6">

        <div *ngIf="currentForm === 1" class="flex flex-wrap -mx-3">
          <!-- First Name -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="firstName">First Name <span class="text-red-600">*</span></label>
            <input class="employeeInput" [(ngModel)]="info.firstName" name="firstName" type="text" required
              minlength="3" #firstName="ngModel" [class.border-red-500]="firstName.invalid && firstName.touched" />
          </div>

          <!-- Last Name -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="lastName">Last Name <span class="text-red-600">*</span></label>
            <input class="employeeInput" [(ngModel)]="info.lastName" name="lastName" type="text" required minlength="3"
              #lastName="ngModel" [class.border-red-500]="lastName.invalid && lastName.touched" />
          </div>

          <!-- Spouse Name -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="spouseName">Father's Name <span class="text-red-600">*</span></label>
            <input required class="employeeInput" [(ngModel)]="info.fatherName" name="spouseName" type="text"
              #fathersName="ngModel" [class.border-red-500]="
                fathersName.invalid && fathersName.touched
              " />
          </div>

          <!-- Date of Birth -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="dob">Date of Birth <span class="text-red-600">*</span></label>
            <input class="employeeInput" [max]="maxBirthDate" [(ngModel)]="info.dob" name="dob" type="date" required
              #dob="ngModel" [class.border-red-500]="dob.invalid && dob.touched" />
          </div>

          <!-- Phone Number -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="phoneno">Phone Number <span class="text-red-600">*</span></label>
            <input class="employeeInput" maxlength="15" [(ngModel)]="info.phone_no" name="phoneno" type="tel" required
              minlength="10" #phoneNo="ngModel" [class.border-red-500]="phoneNo.invalid && phoneNo.touched" />
          </div>

          <!-- Email Address -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="email">Email Address <span class="text-red-600">*</span></label>
            <input class="employeeInput" [(ngModel)]="info.email" name="email" maxlength="50"
              oninput="this.value = this.value.toLowerCase()" pattern="[a-z0-9]+@[a-z0-9]+\.[a-z]{2,5}$" type="email"
              required email #email="ngModel" [class.border-red-500]="email.invalid && email.touched" />
          </div>

          <!-- Aadhar Number -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="aadharNumber">Aadhar Number <span class="text-red-600">*</span></label>
            <input class="employeeInput" [(ngModel)]="info.aadharNo" name="aadharNumber" type="text" minlength="12"
              maxlength="12" required #aadharNumber="ngModel" [class.border-red-500]="
                aadharNumber.invalid && aadharNumber.touched
              " />
          </div>

          <!-- Gender -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="gender">Gender</label>
            <select required #Gender="ngModel" [class.border-red-500]="Gender.invalid && Gender.touched"
              class="employeeInput" [(ngModel)]="info.gender" name="gender">
              <option>Male</option>
              <option>Female</option>
              <option>Other</option>
            </select>
          </div>

          <!-- Marital Status -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="maritalStatus">Marital Status</label>
            <select required #marital="ngModel" [class.border-red-500]="marital.invalid && marital.touched"
              class="employeeInput" [(ngModel)]="info.maritalStatus" name="maritalStatus">
              <option>Single</option>
              <option>Married</option>
            </select>
          </div>
        </div>

        <!-- Addressform -->
        <div *ngIf="currentForm === 2" class="flex flex-wrap -mx-3">
          <fieldset class="flex flex-wrap w-full mb-6">
            <div class="employeeInputDiv">
              <label class="employeeLabel" for="country">Country</label>
              <select class="employeeInput" name="current_countryName" id="country" [(ngModel)]="info.country" required
                #currentCountry="ngModel" [class.border-red-500]="
                  currentCountry.invalid && currentCountry.touched
                " (ngModelChange)="selectedCountry($event)">
                @for (country of countries; track country.iso2) {
                <option [ngValue]="country.name">{{ country.name }}</option>
                }
              </select>
            </div>

            <div class="employeeInputDiv">
              <label class="employeeLabel" for="currentCountryCode">Country-Code</label>
              <input class="employeeInput" [ngClass]="{ view: !isEditing, input: isEditing }" [readOnly]="!isEditing"
                disabled name="currentCountryCode" id="currentCountryCode" [ngModel]="info.countryCode"
                [value]="selectedCountryCode" />
            </div>

            <div class="employeeInputDiv">
              <label class="employeeLabel" for="currentState">State</label>
              <select class="employeeInput" [disabled]="!isEditing" [(ngModel)]="info.state" name="currentState"
                [ngClass]="{ view: !isEditing, input: isEditing }" #currentState="ngModel"
                [class.invalid]="currentState.invalid && currentState.touched" (ngModelChange)="selectedState($event)">
                @for (state of states; track state.iso2) {
                <option [value]="state.iso2">{{ state.name }}</option>
                }
              </select>
            </div>

            <div class="employeeInputDiv">
              <label class="employeeLabel" for="currentCity">City</label>
              <select class="employeeInput" [disabled]="!isEditing" [ngClass]="{ view: !isEditing, input: isEditing }"
                [(ngModel)]="info.city" name="currentCity" required #currentCity="ngModel"
                [class.invalid]="currentCity.invalid && currentCity.touched">
                @for (city of cities; track city.id) {
                <option [value]="city.name">{{ city.name }}</option>
                }
              </select>
            </div>

            <div class="employeeInputDiv">
              <label class="employeeLabel" for="currentStreet">Street-Name</label>
              <input class="employeeInput" [ngClass]="{ view: !isEditing, input: isEditing }" [readOnly]="!isEditing"
                [(ngModel)]="info.street" name="currentStreet" type="text" required #currentStreet="ngModel"
                [class.invalid]="currentStreet.invalid && currentStreet.touched" />
            </div>

            <div class="employeeInputDiv">
              <label class="employeeLabel" for="currentBuildingNo">Building-No.</label>
              <input class="employeeInput" [ngClass]="{ view: !isEditing, input: isEditing }" [readOnly]="!isEditing"
                [(ngModel)]="info.buildingNo" name="currentBuildingNo" type="text" required #currentBuilding="ngModel"
                [class.invalid]="
                  currentBuilding.invalid && currentBuilding.touched
                " />
            </div>

            <div class="employeeInputDiv">
              <label class="employeeLabel" for="currentPostalCode">Postal-Code</label>
              <input class="employeeInput" [ngClass]="{ view: !isEditing, input: isEditing }" [readOnly]="!isEditing"
                [(ngModel)]="info.postal_code" name="currentPostalCode" type="text" required #currentPostal="ngModel"
                [class.invalid]="currentPostal.invalid && currentPostal.touched" />
            </div>
          </fieldset>

          <div class="w-full px-3 mb-6">
            <label class="flex items-center space-x-2">
              <input type="checkbox"  [(ngModel)]="isPermanentAddressDifferent" (click)="togglePermanentAddress()"  name="isPermanentAddressDifferent" />
              <span class="employeeLabel">Different from Current</span>
            </label>
          </div>

          <fieldset *ngIf="isPermanentAddressDifferent" class="w-full flex flex-wrap -mx-3">
            <legend class="ml-4 text-lg font-semibold mb-4 w-full">
              Permanent Address
            </legend>

            <div class="employeeInputDiv">
              <label class="employeeLabel" for="permanentCountry">Country</label>
              <select class="employeeInput" name="permanent_countryName" id="permanentCountry"
                [(ngModel)]="info.permanent_country" required #permanentCountry="ngModel" [class.border-red-500]="
                  permanentCountry.invalid && permanentCountry.touched
                " (ngModelChange)="selectedPermanentCountry($event)">
                @for (country of countries; track country.iso2) {
                <option [ngValue]="country.name">{{ country.name }}</option>
                }
              </select>
            </div>

            

            <div class="employeeInputDiv">
              <label class="employeeLabel" for="permanentCountryCode">Country-Code</label>
              <input class="employeeInput" [ngClass]="{ view: !isEditing, input: isEditing }" [readOnly]="!isEditing"
                disabled name="permanentCountryCode" id="permanentCountryCode" [ngModel]="info.permanent_countryCode"
                [value]="selectedPermanentCountryCode" />
            </div>

            <div class="employeeInputDiv">
              <label class="employeeLabel" for="permanentState">State</label>
              <select class="employeeInput" [disabled]="!isEditing" [(ngModel)]="info.permanent_state"
                name="permanent_state" [ngClass]="{ view: !isEditing, input: isEditing }" #permanentState="ngModel"
                [class.invalid]="
                  permanentState.invalid && permanentState.touched
                " (ngModelChange)="selectedPermanentState($event)">
                @for (state of permanentStates; track state.iso2) {
                <option [value]="state.iso2">{{ state.name }}</option>
                }
              </select>
            </div>

            <div class="employeeInputDiv">
              <label class="employeeLabel" for="permanentCity">City</label>
              <select class="employeeInput" [disabled]="!isEditing" [ngClass]="{ view: !isEditing, input: isEditing }"
                [(ngModel)]="info.permanent_city" name="permanent_city" required #permanentCity="ngModel"
                [class.invalid]="permanentCity.invalid && permanentCity.touched">
                @for (city of permanentCities; track city.id) {
                <option [value]="city.name">{{ city.name }}</option>
                }
              </select>
            </div>

            <div class="employeeInputDiv">
              <label class="employeeLabel" for="permanentStreet">Street-Name</label>
              <input class="employeeInput" [ngClass]="{ view: !isEditing, input: isEditing }" [readOnly]="!isEditing"
                [(ngModel)]="info.permanent_street" name="permanent_street" type="text" required
                #permanentStreet="ngModel" [class.invalid]="
                  permanentStreet.invalid && permanentStreet.touched
                " />
            </div>

            <div class="employeeInputDiv">
              <label class="employeeLabel" for="permanentBuildingNo">Building-No.</label>
              <input class="employeeInput" [ngClass]="{ view: !isEditing, input: isEditing }" [readOnly]="!isEditing"
                [(ngModel)]="info.permanent_buildingNo" name="permanent_buildingNo" type="text" required
                #permanentBuilding="ngModel" [class.invalid]="
                  permanentBuilding.invalid && permanentBuilding.touched
                " />
            </div>

            <div class="employeeInputDiv">
              <label class="employeeLabel" for="permanent_postal_code">Postal-Code</label>
              <input class="employeeInput" [ngClass]="{ view: !isEditing, input: isEditing }" [readOnly]="!isEditing"
                [(ngModel)]="info.permanent_postal_code" name="permanent_postal_code" type="text" required
                #permanentPostal="ngModel" [class.invalid]="
                  permanentPostal.invalid && permanentPostal.touched
                " />
            </div>
          </fieldset>
        </div>

        <!-- JobForm -->
        <div *ngIf="currentForm === 3" class="flex flex-wrap -mx-3">
          <!-- Designation -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="designation">
              Designation <span class="text-red-600">*</span>
            </label>
            <input class="employeeInput" [(ngModel)]="info.designation" name="designation" type="text" required
              #designation="ngModel" [class.border-red-500]="
                designation.invalid && designation.touched
              " />
          </div>
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="manager">
              Manager <span class="text-red-600">*</span>
            </label>
            <input class="employeeInput" [(ngModel)]="info.manager" name="manager" type="text" required
              #manager="ngModel" [class.border-red-500]="manager.invalid && manager.touched" />
          </div>

          <!-- Department -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="department">
              Department <span class="text-red-600">*</span>
            </label>
            <select class="employeeInput" [(ngModel)]="info.department" name="department" required #department="ngModel"
              [class.border-red-500]="department.invalid && department.touched">
              @for(dept of allDepartments$ | async; track dept.departmentId){
              <option>{{ dept.departmentName }}</option>
              }
            </select>
          </div>

          <!-- Date of Joining -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="dateOfJoining">
              Date of Joining <span class="text-red-600">*</span>
            </label>
            <input class="employeeInput" [(ngModel)]="info.dateOfJoining" name="dateOfJoining" type="date" required
              #dateOfJoining="ngModel" [class.border-red-500]="
                dateOfJoining.invalid && dateOfJoining.touched
              " />
          </div>
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="employmentType">
              Employment Type <span class="text-red-600">*</span>
            </label>
            <select class="employeeInput" [(ngModel)]="info.employementType" name="employmentType" required
              #employment="ngModel" [class.border-red-500]="employment.invalid && employment.touched">
              <option disabled value="">-- Select Type --</option>
              <option>Full-Time</option>
              <option>Contract</option>
              <option>Intern</option>
            </select>
          </div>

          <div class="employeeInputDiv">
            <label class="employeeLabel" for="organizationName">
              Organization Name <span class="text-red-600">*</span>
            </label>

            <select class="employeeInput" [(ngModel)]="info.organization" name="organizationName" required
              #organizationName="ngModel" [class.border-red-500]="
                organizationName.invalid && organizationName.touched
              ">
              <option [ngValue]="null" disabled>Select an organization</option>

              @for(org of allOrganizations$ | async; track org.organizationId) {
              <option [value]="org.organizationName">
                {{ org.organizationName }}
              </option>
              }
            </select>
          </div>

          <!-- Work Location -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="workLocation">Work Location</label>
            <input class="employeeInput" [(ngModel)]="info.workLocation" name="workLocation" type="text"
              #workLocation="ngModel" />
          </div>
        </div>


        <!-- Payroll Form -->
        <div *ngIf="currentForm === 4" class="flex flex-wrap -mx-3">
          <!-- Bank Name -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="bankName">Bank Name <span class="text-red-600">*</span></label>
            <input class="employeeInput" [(ngModel)]="info.bankName" name="bankName" type="text" required
              #bankName="ngModel" [class.border-red-500]="bankName.invalid && bankName.touched" />
          </div>
          
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="salary">
              Salary <span class="text-red-600">*</span>
            </label>
            <input class="employeeInput" [(ngModel)]="info.salary"  name="salary"
              type="text" required #salary="ngModel" [class.border-red-500]="salary.invalid && salary.touched" />
          </div>

          <!-- EPF Eligible -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="epfEligible">EPF Eligible?</label>
            <select class="employeeInput" [(ngModel)]="info.epfEligible" name="epfEligible"
              (ngModelChange)="CheckEligble($event)" required #epfEligible="ngModel" [class.border-red-500]="
                epfEligible.invalid && epfEligible.touched
              ">
              <option value="Yes">Yes</option>
              <option value="No">No</option>
            </select>
          </div>

          <!-- EPF Number -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="epfNumber">EPF Number</label>
            <input class="employeeInput" [required]="isEligble === 'Yes'" [disabled]="isEligble === 'No'"
              [(ngModel)]="info.pfNumber" name="epfNumber" type="text" maxlength="24" minlength="22" required
              #epfNumber="ngModel" [class.border-red-500]="epfNumber.invalid && epfNumber.touched" />
          </div>

          <!-- EPF Deduction Rate -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="deductionRate">EPF Deducted Amount</label>
            <input class="employeeInput" 
             disabled [(ngModel)]="info.DeductionRate" name="deductionRate" type="text"
              minlength="1" maxlength="12" required #deductionRate="ngModel" [class.border-red-500]="
                deductionRate.invalid && deductionRate.touched
              " />
          </div>

          

          <div class="employeeInputDiv">
            <label class="employeeLabel" for="tds">TDS</label>  
            <input class="employeeInput" [ngClass]="{ view: !isEditing, input: isEditing }" [(ngModel)]="info.tds"
               disabled  name="tds" type="number" maxlength="10" required #tds="ngModel"
              [class.border-red-500]="tds.invalid && tds.touched" />
          </div>

          <div class="employeeInputDiv">
            <label class="employeeLabel" for="ESIContribution">ESI Contribution</label>
            <input class="employeeInput" [ngClass]="{ view: !isEditing, input: isEditing }"
              disabled  [(ngModel)]="info.ESIContribution" name="ESIContribution" type="number" maxlength="10" required
              #ESIContribution="ngModel" [class.border-red-500]="
                ESIContribution.invalid && ESIContribution.touched
              " />
          </div>

          <!-- EPF Deduction Amount -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="deductionAmount">Total Deducted Amount
            </label>
            <input class="employeeInput"  disabled 
              [(ngModel)]="info.deductionAmount" name="deductionAmount" type="number" maxlength="8" required
              #deductionAmount="ngModel" [class.border-red-500]="
                deductionAmount.invalid && deductionAmount.touched
              " />
          </div>

          <!-- Net Salary -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="netSalary">Net Salary </label>
            <input class="employeeInput" [ngClass]="{ view: !isEditing, input: isEditing }" disabled
              [(ngModel)]="info.netSalary" name="netSalary" type="number" maxlength="10" required #netSalary="ngModel"
              [class.border-red-500]="netSalary.invalid && netSalary.touched" />
          </div>

          <!-- Account Holder Name -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="accountHolderName">
              Account Holder Name <span class="text-red-600">*</span>
            </label>
            <input class="employeeInput" [(ngModel)]="info.accountHolderName" name="accountHolderName" type="text"
              required #accountHolderName="ngModel" [class.border-red-500]="
                accountHolderName.invalid && accountHolderName.touched
              " />
          </div>

          <!-- Bank Account Number -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="accountNumber">
              Bank Account Number <span class="text-red-600">*</span>
            </label>
            <input class="employeeInput" [(ngModel)]="info.accountNumber" name="accountNumber" type="text" required
              #accountNumber="ngModel" [class.border-red-500]="
                accountNumber.invalid && accountNumber.touched
              " />
          </div>

          <!-- IFSC Code -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="ifscCode">
              IFSC Code <span class="text-red-600">*</span>
            </label>
            <input class="employeeInput" [(ngModel)]="info.ifscCode" name="ifscCode" type="text" required
              #ifscCode="ngModel" [class.border-red-500]="ifscCode.invalid && ifscCode.touched" />
          </div>

          <!-- PAN Number -->
          <div class="employeeInputDiv">
            <label class="employeeLabel" for="panNumber">PAN Number</label>
            <input class="employeeInput" [(ngModel)]="info.panNumber" name="panNumber" type="text"
              #panNumber="ngModel" />
          </div>
        </div>
        <!-- Document Upload Form -->
        <div *ngIf="currentForm === 5" class="w-full p-4">
          <div class="flex justify-center items-center gap-6">
            <!-- Box 1: ID Proof Upload -->
            <div class="w-1/2 max-w-sm">
              <label for="idProofUpload"
                class="flex flex-col items-center justify-center w-full h-48 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100">
                <div class="flex flex-col items-center justify-center pt-5 pb-6">
                  <mat-icon class="text-gray-500 mb-4"
                    style="font-size: 48px; width: 48px; height: 48px">picture_as_pdf</mat-icon>
                  <p class="text-sm font-semibold text-gray-600">ID Proof</p>
                  <p class="text-xs text-gray-500">
                    Click to upload (PDF, PNG, JPG)
                  </p>
                </div>
                <input id="idProofUpload" type="file" class="hidden" (change)="onIdProofUpload($event)" />
              </label>
            </div>

            <!-- Box 2: Offer Letter Upload -->
            <div class="w-1/2 max-w-sm">
              <label for="offerLetterUpload"
                class="flex flex-col items-center justify-center w-full h-48 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100">
                <div class="flex flex-col items-center justify-center pt-5 pb-6">
                  <mat-icon class="text-gray-500 mb-4"
                    style="font-size: 48px; width: 48px; height: 48px">picture_as_pdf</mat-icon>
                  <p class="text-sm font-semibold text-gray-600">
                    Offer Letter
                  </p>
                  <p class="text-xs text-gray-500">
                    Click to upload (PDF, PNG, JPG)
                  </p>
                </div>
                <input id="offerLetterUpload" type="file" class="hidden" (change)="onOfferLetterUpload($event)" />
              </label>
            </div>
          </div>
        </div>

        <!-- Confirmation Page -->
        <div *ngIf="currentForm === 6" class="px-6 bg-white rounded-lg shadow-md">
          <h2 class="text-2xl font-bold text-blue-900 mb-6 border-b pb-2">
            Confirm Your Details
          </h2>

          <!-- Personal & Address Details Section (4-Column Layout) -->
          <div class="mb-6">
            <h3 class="text-lg font-semibold text-gray-700 mb-3">
              Personal & Address Details
            </h3>
            <div class="flex flex-wrap -mx-2 text-sm">
              <!-- Row 1 -->
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">First Name</p>
                <p class="font-medium text-gray-800">{{ info.firstName }}</p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Last Name</p>
                <p class="font-medium text-gray-800">{{ info.lastName }}</p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Father's Name</p>
                <p class="font-medium text-gray-800">{{ info.fatherName }}</p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Date of Birth</p>
                <p class="font-medium text-gray-800">{{ info.dob | date }}</p>
              </div>

              <!-- Row 2 -->
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Phone Number</p>
                <p class="font-medium text-gray-800">{{ info.phone_no }}</p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Email Address</p>
                <p class="font-medium text-gray-800">{{ info.email }}</p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Aadhar</p>
                <p class="font-medium text-gray-800">{{ info.aadharNo }}</p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Gender</p>
                <p class="font-medium text-gray-800">{{ info.gender }}</p>
              </div>

              <!-- Row 3 -->
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Marital Status</p>
                <p class="font-medium text-gray-800">
                  {{ info.maritalStatus }}
                </p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Street & Building</p>
                <p class="font-medium text-gray-800">
                  {{ info.buildingNo }} {{ info.street }}
                </p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">City</p>
                <p class="font-medium text-gray-800">{{ info.city }}</p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">State</p>
                <p class="font-medium text-gray-800">{{ getStateName(info.state) }}</p>
              </div>

              <!-- Row 4 -->
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Country</p>
                <p class="font-medium text-gray-800">{{ info.country }}</p>
              </div>
            </div>
          </div>

          <!-- Employment & Payroll Section (4-Column Layout) -->
          <div>
            <h3 class="text-lg font-semibold text-gray-700 mb-3">
              Employment & Payroll
            </h3>
            <div class="flex flex-wrap -mx-2 text-sm">
              <!-- Row 1 -->
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Organization</p>
                <p class="font-medium text-gray-800">{{ info.organization }}</p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Designation</p>
                <p class="font-medium text-gray-800">{{ info.designation }}</p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Department</p>
                <p class="font-medium text-gray-800">{{ info.department }}</p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Employment Type</p>
                <p class="font-medium text-gray-800">
                  {{ info.employementType }}
                </p>
              </div>

              <!-- Row 2 -->
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Date of Joining</p>
                <p class="font-medium text-gray-800">
                  {{ info.dateOfJoining | date }}
                </p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Salary</p>
                <p class="font-medium text-gray-800">
                  {{ info.salary | currency : info.currency }}
                </p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Bank Name</p>
                <p class="font-medium text-gray-800">{{ info.bankName }}</p>
              </div>

              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">PAN Number</p>
                <p class="font-medium text-gray-800">{{ info.panNumber }}</p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Account Number</p>
                <p class="font-medium text-gray-800">
                  {{ info.accountNumber }}
                </p>
              </div>

              <!-- Row 3 -->
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">PF Number (UAN)</p>
                <p class="font-medium text-gray-800">
                  {{ info.pfNumber }}
                </p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">epfNumber</p>
                <p class="font-medium text-gray-800">{{ info.pfNumber }}</p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Deduction Rate</p>
                <p class="font-medium text-gray-800">
                  {{ info.DeductionRate }}
                </p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Deduction Amount</p>
                <p class="font-medium text-gray-800">
                  {{ info.deductionAmount | currency : info.currency }}
                </p>
              </div>
              <div class="w-1/2 md:w-1/4 px-2 mb-4">
                <p class="text-gray-500">Net Salary</p>
                <p class="font-medium text-gray-800">
                  {{ info.netSalary | currency : info.currency }}
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="flex justify-end gap-4 p-4 bg-gray-50 rounded-b-xl border-t-2 border-gray-100">
          <button [hidden]="currentForm === 1" type="button" (click)="previousForm()"
            class="px-5 py-2 text-sm text-white font-semibold bg-blue-900 rounded-md hover:bg-blue-800 disabled:bg-gray-400">
            Previous
          </button>

          <!-- [disabled]="personalInfoForm.invalid" have to add this in button -->
          <button type="button" (click)="nextForm(personalInfoForm)" [disabled]="personalInfoForm.invalid"
            [hidden]="currentForm >= 6"
            class="px-8 py-2 text-sm text-white font-semibold bg-blue-900 rounded-md hover:bg-blue-800 disabled:bg-gray-400">
            Next
          </button>
          <button type="submit" [hidden]="currentForm <= 5"
            [disabled]="personalInfoForm.invalid "
            [class.bg-grey-400]="personalInfoForm.invalid"
            class="px-8 py-2 text-sm text-white font-semibold bg-blue-900 rounded-md hover:bg-blue-800 disabled:bg-gray-400">
            Submit
          </button>
        </div>
      </form>

      <!-- Form Footer with Navigation -->
    </div>
  </div>
</div>
